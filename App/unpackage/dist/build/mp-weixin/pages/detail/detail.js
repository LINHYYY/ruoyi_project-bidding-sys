(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"1b867":function(e,t,n){"use strict";(function(e,t){var u=n("4ea4");n("104b");u(n("66fd"));var i=u(n("6d9b"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"38f3":function(e,t,n){},"651b":function(e,t,n){"use strict";var u=n("a2b0"),i=n.n(u);i.a},"6d9b":function(e,t,n){"use strict";n.r(t);var u=n("cef9"),i=n("bd23");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("edf5"),n("651b");var r=n("f0c5"),a=Object(r["a"])(i["default"],u["b"],u["c"],!1,null,"72304cbe",null,!1,u["a"],void 0);t["default"]=a.exports},a2b0:function(e,t,n){},bd23:function(e,t,n){"use strict";n.r(t);var u=n("ca93"),i=n.n(u);for(var o in u)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return u[e]}))}(o);t["default"]=i.a},ca93:function(e,t,n){"use strict";(function(e){var u=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("7624")),o={data:function(){return{room:{villageName:"",houseNum:"",houseHall:"",toiletNum:"",roomType:"",direction:"",price:"",introduce:"",heart:!1},village:{year:"",type:"",green:""},swiperlist:[],tagList:[],user:{},longitude:120.14,latitude:30.35,distance:0}},onLoad:function(e){var t=e.houseId;this.findHouseById(t)},methods:{heartHouse:function(){var t=this,n=e.getStorageSync("lifeData"),u=n.vuex_user;if(!u)return e.reLaunch({url:"../login/login"});this.$u.post("api/houseApi/saveHeart",{heart:this.room.heart,houseId:this.room.id,userId:u.user.userId}).then((function(e){t.room.heart=!t.room.heart,t.$mytip.toast(e.msg)}))},goHome:function(){e.reLaunch({url:"../index/index"})},clickItem:function(){e.makePhoneCall({phoneNumber:this.room.agentPhone})},findHouseById:function(t){var n=this;this.$u.get("api/houseApi/findHouseById",{id:t}).then((function(u){var o=u.data;0==o.type?o.type="整租":1==o.type&&(o.type="合租"),1==o.roomType?o.roomType="主卧":2==o.roomType?o.roomType="次卧":o.roomType="未知",n.$u.test.isEmpty(o.houseNum)&&(o.houseNum=""),n.$u.test.isEmpty(o.houseHall)&&(o.houseHall=""),n.$u.test.isEmpty(o.toiletNum)&&(o.toiletNum=""),n.$u.test.isEmpty(o.floor)?o.floor="":o.floor=o.floor+"层",n.swiperlist=o.imageList.map((function(e){var t=e.imgUrl;return t=t.includes(i.default.staticUrl)?e.imgUrl:i.default.staticUrl+e.imgUrl,{title:e.imageName,image:t}})),n.tagList=o.featureList.map((function(e){return{title:e.feature}})),o.agentAvatar.includes(i.default.staticUrl)||(o.agentAvatar=i.default.staticUrl+o.agentAvatar),n.user=o.user,n.village=o.village,n.room=o,n.selectHouseHeart(t);var r="";r="整租"==o.type?n.village.name+" "+n.room.houseNum+n.room.houseHall+n.room.toiletNum+" "+n.room.decoration+" ¥"+n.room.price+"/月":n.village.name+" "+o.roomType+" "+n.room.decoration+" ¥"+n.room.price+"/月",n.$u.mpShare={title:r,imageUrl:n.room.faceUrl};var a=e.getStorageSync("houseHistory");a||(a=[]),a.length>=20&&a.pop(),a.push(n.room);var s=[];a.forEach((function(e,t){s.push(e.code)}));var c=[],l=new Set(s);l.forEach((function(e){var t=s.findIndex((function(t){return t===e}));c.push(a[t])})),e.setStorageSync("houseHistory",c),n.longitude=o.longitude,n.latitude=o.latitude;var d=39.909,f=116.39742,m=n.latitude,h=n.longitude;e.getLocation({type:"gcj02",success:function(e){d=e.latitude,f=e.longitude,n.distance=n.getDistance(d,f,m,h)}})}))},selectHouseHeart:function(t){var n=this,u=e.getStorageSync("lifeData"),i=u.vuex_user;if(i){this.$u.get("api/houseApi/selectHouseHeart",{houseId:t,userId:i.user.userId}).then((function(e){n.room.heart=e.data}))}},clickImg:function(t){var n=this.swiperlist.map((function(e){return e.image}));console.log(n),e.previewImage({current:t,urls:n})},clickMap:function(t){e.openLocation({longitude:Number(this.longitude),latitude:Number(this.latitude),name:this.room.villageName,address:this.room.address})},getDistance:function(e,t,n,u){e=e||0,t=t||0,n=n||0,u=u||0;var i=e*Math.PI/180,o=n*Math.PI/180,r=i-o,a=t*Math.PI/180-u*Math.PI/180,s=12756274*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(i)*Math.cos(o)*Math.pow(Math.sin(a/2),2)));return(s/1e3).toFixed(2)}}};t.default=o}).call(this,n("543d")["default"])},cef9:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u}));var u={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"cb23"))},uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"9849"))},uCellGroup:function(){return n.e("uview-ui/components/u-cell-group/u-cell-group").then(n.bind(null,"1fc3"))},uCellItem:function(){return n.e("uview-ui/components/u-cell-item/u-cell-item").then(n.bind(null,"3e8a"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"0f4b"))},uCard:function(){return n.e("uview-ui/components/u-card/u-card").then(n.bind(null,"8be0"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"ef11"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"a93f"))},uDivider:function(){return n.e("uview-ui/components/u-divider/u-divider").then(n.bind(null,"d986"))}},i=function(){var e=this.$createElement;this._self._c},o=[]},edf5:function(e,t,n){"use strict";var u=n("38f3"),i=n.n(u);i.a}},[["1b867","common/runtime","common/vendor"]]]);